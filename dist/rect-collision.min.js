/*!
 * rect-collision v0.1.0
  */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).rectcollision=e.rectcollision||{})}(this,(function(e){"use strict";function r(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=100;function i(e,r){return!(e.maxX<r.minX||e.minY>r.maxY||e.minX>r.maxX||e.maxY<r.minY)}var o=function(){function e(){this.gridIndex=new Map,this.init()}var r=e.prototype;return r.init=function(){for(var e=-10;e<=20;e++)for(var r=-10;r<=20;r++){var t={col:e,row:r,items:[]};this.gridIndex.set(e+"_"+r,t)}},r.insert=function(e){if(!e)return this;if(e._gridIndex)return this;e._gridIndex=[];for(var r=e.minX,t=e.minY,i=e.maxX,o=e.maxY,a=Math.floor(r/n),f=Math.ceil(i/n),l=Math.floor(t/50),d=Math.ceil(o/50),s=this.gridIndex,u=a;u<=f;u++)for(var c=l;c<=d;c++){var h=u+"_"+c;s.has(h)||s.set(h,{col:u,row:c,items:[]}),s.get(h).items.push(e),e._gridIndex.push(h)}},r.remove=function(e){if(!e)return this;var r=e._gridIndex;if(!r||!r.length)return delete e._gridIndex,this;for(var t=0,n=r.length;t<n;t++){var i=r[t],o=this.gridIndex.get(i);if(o){var a=o.items.indexOf(e);a>-1&&e.splice(a,1)}}return delete e._gridIndex,this},r.collides=function(e){if(!e)return!1;for(var r=e.minX,t=e.minY,o=e.maxX,a=e.maxY,f=Math.floor(r/n),l=Math.ceil(o/n),d=Math.floor(t/50),s=Math.ceil(a/50),u=i,c=this.gridIndex,h=f;h<=l;h++)for(var m=d;m<=s;m++){var v=h+"_"+m,g=c.get(v);if(g){var x=g.items;if(x.length)for(var p=0,I=x.length;p<I;p++)if(u(e,x[p]))return!0}}return!1},r.clear=function(){for(var e,r=t(this.gridIndex);!(e=r()).done;){for(var n=e.value,i=n[1].items,o=0,a=i.length;o<a;o++)delete i[o]._gridIndex;n[1].items=[]}return this},r.all=function(){for(var e,r=[],n=t(this.gridIndex);!(e=n()).done;){var i=e.value[1].items;if(i&&i.length)for(var o=0,a=i.length;o<a;o++){var f=i[o];-1===r.indexOf(f)&&r.push(f)}}return r},e}();e.GRIDHEIGHT=50,e.GRIDWIDTH=n,e.RectCollision=o,Object.defineProperty(e,"__esModule",{value:!0})}));
