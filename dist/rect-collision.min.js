/*!
 * rect-collision v0.1.0
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).rectcollision=t.rectcollision||{})}(this,(function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=100;function i(t,e){return!(t.maxX<e.minX||t.minY>e.maxY||t.minX>e.maxX||t.maxY<e.minY)}var o=function(){function t(){this.gridIndex=new Map,this.init()}var e=t.prototype;return e.init=function(){for(var t=-10;t<=20;t++)for(var e=-10;e<=20;e++){var r={col:t,row:e,items:[]};this.gridIndex.set(t+"_"+e,r)}},e.insert=function(t){if(!t)return this;if(t._insert)return this;t._insert=!0;for(var e=t.minX,r=t.minY,i=t.maxX,o=t.maxY,a=Math.floor(e/n),f=Math.ceil(i/n),l=Math.floor(r/50),s=Math.ceil(o/50),u=this.gridIndex,c=a;c<=f;c++)for(var d=l;d<=s;d++){var h=c+"_"+d;u.has(h)||u.set(h,{col:c,row:d,items:[]}),u.get(h).items.push(t)}},e.collides=function(t){if(!t)return!1;for(var e=t.minX,r=t.minY,o=t.maxX,a=t.maxY,f=Math.floor(e/n),l=Math.ceil(o/n),s=Math.floor(r/50),u=Math.ceil(a/50),c=i,d=this.gridIndex,h=f;h<=l;h++)for(var m=s;m<=u;m++){var v=h+"_"+m,g=d.get(v);if(g){var p=g.items;if(p.length)for(var y=0,x=p.length;y<x;y++)if(c(t,p[y]))return!0}}return!1},e.clear=function(){for(var t,e=r(this.gridIndex);!(t=e()).done;){for(var n=t.value,i=n[1].items,o=0,a=i.length;o<a;o++)delete i[o]._insert;n[1].items=[]}return this},e.all=function(){for(var t,e=[],n=r(this.gridIndex);!(t=n()).done;){var i=t.value[1].items;if(i&&i.length)for(var o=0,a=i.length;o<a;o++){var f=i[o];-1===e.indexOf(f)&&e.push(f)}}return e},t}();t.GRIDHEIGHT=50,t.GRIDWIDTH=n,t.RectCollision=o,Object.defineProperty(t,"__esModule",{value:!0})}));
