/*!
 * rect-collision v0.1.0
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).rectcollision=t.rectcollision||{})}(this,(function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=100;function i(t,e){return!(t.maxX<e.minX||t.minY>e.maxY||t.minX>e.maxX||t.maxY<e.minY)}var o=function(){function t(){this.gridIndex=new Map,this.items=[],this.init()}var e=t.prototype;return e.init=function(){for(var t=-10;t<=20;t++)for(var e=-10;e<=20;e++){var r={col:t,row:e,index:[]};this.gridIndex.set(t+"_"+e,r)}},e.insert=function(t){if(!t)return this;if(t._insert)return this;t._insert=!0;for(var e=t.minX,r=t.minY,i=t.maxX,o=t.maxY,a=Math.floor(e/n),s=Math.ceil(i/n),f=Math.floor(r/50),l=Math.ceil(o/50),u=this.gridIndex,c=this.items.push(t),h=f,d=a;d<=s;d++)for(h=f;h<=l;h++){var m=d+"_"+h;(d<-10||d>20||h<-10||h>20)&&(u.has(m)||u.set(m,{col:d,row:h,index:[]})),u.get(m).index.push(c-1)}},e.collides=function(t){if(!t)return!1;for(var e=t.minX,r=t.minY,o=t.maxX,a=t.maxY,s=Math.floor(e/n),f=Math.ceil(o/n),l=Math.floor(r/50),u=Math.ceil(a/50),c=i,h=this.gridIndex,d=l,m=s;m<=f;m++)for(d=l;d<=u;d++){var v=m+"_"+d,p=h.get(v);if(p){var x=p.index;if(x.length)for(var y=0,g=x.length;y<g;y++){var b=x[y];if(c(t,this.items[b]))return!0}}}return!1},e.clear=function(){for(var t,e=r(this.gridIndex);!(t=e()).done;){t.value[1].index=[]}for(var n=0,i=this.items.length;n<i;n++)delete this.items[n]._insert;return this.items=[],this},e.all=function(){return this.items},t}();t.GRIDHEIGHT=50,t.GRIDWIDTH=n,t.RectCollision=o,Object.defineProperty(t,"__esModule",{value:!0})}));
